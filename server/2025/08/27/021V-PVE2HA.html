<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="google-translate-customization" content="108d9124921d80c3-80e20d618ff053c8-g4f02ec6f3dba68b7-c"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>이젠 데탑도 서버에 넣어요. | Nveloper’s Note</title>
<meta name="generator" content="Jekyll v4.4.1" />
<meta property="og:title" content="이젠 데탑도 서버에 넣어요." />
<meta name="author" content="Steven" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="서론 제목에서 말한 ‘데탑을 서버에 넣는다.’ 라는 문장은 사실 Proxmox에 익숙한 사람이라면 아주 당연하게 받아들여질 문장이다. BIOS 설정에서 IOMMU 설정을 활성화한 다음에 GPU Passthrough를 진행한 다음, 윈도우 VM에 할당하면 된다. 이렇게 구성한 경우 GPU 단자에 디스플레이 케이블을 연결하기만 하면 우리가 통상적으로 쓰는 데스크탑 마냥 사용할 수 있다. 하지만 여기서 다룰 내용은 해당 내용이 아니니 다른 포스트로 이동하길 바란다." />
<meta property="og:description" content="서론 제목에서 말한 ‘데탑을 서버에 넣는다.’ 라는 문장은 사실 Proxmox에 익숙한 사람이라면 아주 당연하게 받아들여질 문장이다. BIOS 설정에서 IOMMU 설정을 활성화한 다음에 GPU Passthrough를 진행한 다음, 윈도우 VM에 할당하면 된다. 이렇게 구성한 경우 GPU 단자에 디스플레이 케이블을 연결하기만 하면 우리가 통상적으로 쓰는 데스크탑 마냥 사용할 수 있다. 하지만 여기서 다룰 내용은 해당 내용이 아니니 다른 포스트로 이동하길 바란다." />
<link rel="canonical" href="https://nveloper.github.io/server/2025/08/27/021V-PVE2HA.html" />
<meta property="og:url" content="https://nveloper.github.io/server/2025/08/27/021V-PVE2HA.html" />
<meta property="og:site_name" content="Nveloper’s Note" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2025-08-27T00:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="이젠 데탑도 서버에 넣어요." />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Steven"},"dateModified":"2025-08-27T00:00:00+00:00","datePublished":"2025-08-27T00:00:00+00:00","description":"서론 제목에서 말한 ‘데탑을 서버에 넣는다.’ 라는 문장은 사실 Proxmox에 익숙한 사람이라면 아주 당연하게 받아들여질 문장이다. BIOS 설정에서 IOMMU 설정을 활성화한 다음에 GPU Passthrough를 진행한 다음, 윈도우 VM에 할당하면 된다. 이렇게 구성한 경우 GPU 단자에 디스플레이 케이블을 연결하기만 하면 우리가 통상적으로 쓰는 데스크탑 마냥 사용할 수 있다. 하지만 여기서 다룰 내용은 해당 내용이 아니니 다른 포스트로 이동하길 바란다.","headline":"이젠 데탑도 서버에 넣어요.","mainEntityOfPage":{"@type":"WebPage","@id":"https://nveloper.github.io/server/2025/08/27/021V-PVE2HA.html"},"url":"https://nveloper.github.io/server/2025/08/27/021V-PVE2HA.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="icon" href="">
  <link rel="canonical" href="https://nveloper.github.io">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-noto-sans@0.0.72/index.min.css">
  <link rel="stylesheet" href="/assets/css/main.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Product+Sans:wght@400;700&display=swap" rel="stylesheet">
  <script src="/assets/js/main.js"></script><link type="application/atom+xml" rel="alternate" href="https://nveloper.github.io/feed.xml" title="Nveloper&apos;s Note" /><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js"></script>
<!-- and it's easy to individually load additional languages -->
<script charset="UTF-8"
        src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/languages/go.min.js"
        async></script>



















<script>
// Init highlight js
document.addEventListener('DOMContentLoaded', function(event) {
  var els = document.querySelectorAll('pre code')

  function addLangData(block) {
    var outer = block.parentElement.parentElement.parentElement;
    var lang = block.getAttribute('data-lang');
    for (var i = 0; i < outer.classList.length; i++) {
      var cls = outer.classList[i];
      if (cls.startsWith('language-')) {
        lang = cls;
        break;
      }
    }
    if (!lang) {
      cls = block.getAttribute('class');
      lang = cls ? cls.replace('hljs ', '') : '';
    }
    if (lang.startsWith('language-')) {
      lang = lang.substr(9);
    }
    block.setAttribute('class', 'hljs ' + lang);
    block.parentNode.setAttribute('data-lang', lang);
  }

  function addBadge(block) {
    var enabled = ('true' || 'true').toLowerCase();
    if (enabled == 'true') {
      var pre = block.parentElement;
      pre.classList.add('badge');
    }
  }

  function handle(block) {
    addLangData(block);
    addBadge(block)
    hljs.highlightBlock(block);
  }

  for (var i = 0; i < els.length; i++) {
    var el = els[i];
    handle(el);
  }
});
</script>

<style>
  /* code language badge */
  pre.badge::before {
    content: attr(data-lang);
    color: #fff;
    background-color: #ff4e00;
    padding: 0 .5em;
    border-radius: 0 2px;
    text-transform: uppercase;
    text-align: center;
    min-width: 32px;
    display: inline-block;
    position: absolute;
    right: 0;
  }

  /* fix wrong badge display for firefox browser */
  code > table pre::before {
    display: none;
  }
</style>
<script
  src="//cdnjs.cloudflare.com/ajax/libs/photoswipe/5.3.7/umd/photoswipe-lightbox.umd.min.js" async></script>
<script
  src="//cdnjs.cloudflare.com/ajax/libs/photoswipe/5.3.7/umd/photoswipe.umd.min.js" async></script>
<link
  href="//cdnjs.cloudflare.com/ajax/libs/photoswipe/5.3.7/photoswipe.min.css"
  rel="stylesheet"
/>
<style>
  .pswp .pswp__container .pswp__img {
    background-color: white;
  }
</style>

<script>
  function initPhotoSwipe() {
    let customOptions = {};

    try {
      const data = ``.replaceAll("=>", ":");
      customOptions = JSON.parse(data);
    } catch (e) {
      console.info("Invalid custom photo previewer options! " + e.message);
    }

    // Define object and gallery options
    const options = Object.assign(
      {
        gallery: "section.main",
        children: "a.photo-swipe",
        photo_scale: 2,
        // dynamic import is not supported in UMD version
        pswpModule: PhotoSwipe,
      },
      customOptions
    );

    const galleryEl = document.querySelector(options.gallery);
    if (!galleryEl) {
      return;
    }

    const imgEls = [];
    const els = galleryEl.querySelectorAll("img:not(.emoji)");
    els.forEach((el) => {
      if (el.src.trim() == "") {
        return;
      }
      if (!imgEls.includes(el)) {
        imgEls.push(el);
      }
    });

    if (imgEls.length === 0) {
      return;
    }

    imgEls.forEach((imgEl) => {
      imgEl.outerHTML = `
      <a class="photo-swipe"
        href="${imgEl.src}"
        data-pswp-width="${
          Math.max(imgEl.naturalWidth, imgEl.width) * options.photo_scale
        }"
        data-pswp-height="${
          Math.max(imgEl.naturalHeight, imgEl.height) * options.photo_scale
        }"
        data-pswp-caption="${imgEl.getAttribute("caption") || imgEl.alt}"
        target="_blank">
        ${imgEl.outerHTML}
      </a>`;
    });

    // Initialize PhotoSwipe 5
    var lightbox = new PhotoSwipeLightbox(options);

    lightbox.init();
  }

  window.addEventListener("load", initPhotoSwipe);
</script>
<meta property="og:image" content="https://nveloper.github.io/assets/images/banners/General Wallpaper.jpg" />
  <meta property="og:title" content="Nveloper's Note" />
  <meta property="og:description" content="여러 글 써보기" />
</head>
<body>





































































































































<header class="site-header site-header-transparent" role="banner">

  <div class="wrapper">
    <div class="site-header-inner"><span class="site-brand"><a class="site-brand-inner" rel="author" href="/">
  <img class="site-favicon" title="Nveloper&#39;s Note" src="" onerror="this.style.display='none'">
  Nveloper&#39;s Note
</a>
</span><nav class="site-nav">
          <input type="checkbox" id="nav-trigger" class="nav-trigger" />
          <label for="nav-trigger">
            <span class="menu-icon">
              <svg viewBox="0 0 18 15" width="18px" height="15px">
                <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
              </svg>
            </span>
          </label>

          <div class="trigger"><a class="page-link" href="/about.html">ABOUT</a><a class="page-link" href="/archives.html">ARCHIVES</a><a class="page-link" href="/categories.html">CATEGORIES</a><a class="page-link" href="/">HOME</a><a class="page-link" href="/tags.html">TAGS</a>









<div class="page-link" style="display: inline;">



<div id="google_translate_element" style="display: none;">
</div>

<div class="ct-language">
  <ul class="list-unstyled ct-language-dropdown">
    
      <li>
        <a href="#" class="lang-select" data-lang="en">
          
          <img src="https://cdn.countryflags.com/thumbs/united-states-of-america/flag-400.png" title="English">
          
        </a>
      </li>
    
      <li>
        <a href="#" class="lang-select" data-lang="fr">
          
          <img src="https://cdn.countryflags.com/thumbs/france/flag-400.png" title="French">
          
        </a>
      </li>
    
      <li>
        <a href="#" class="lang-select" data-lang="zh-CN">
          
          <img src="https://cdn.countryflags.com/thumbs/china/flag-400.png" title="Chinese(Simple)">
          
        </a>
      </li>
    
      <li>
        <a href="#" class="lang-select" data-lang="ja">
          
          <img src="https://cdn.countryflags.com/thumbs/japan/flag-400.png" title="Japanese">
          
        </a>
      </li>
    
      <li>
        <a href="#" class="lang-select" data-lang="ko">
          
          <img src="https://cdn.countryflags.com/thumbs/south-korea/flag-400.png" title="Korean">
          
        </a>
      </li>
    
      <li>
        <a href="#" class="lang-select" data-lang="ru">
          
          <img src="https://cdn.countryflags.com/thumbs/russia/flag-400.png" title="Russian">
          
        </a>
      </li>
    
  </ul>
</div>

<script type="text/javascript">
function googleTranslateElementInit() {
  new google.translate.TranslateElement({
    pageLanguage: 'en',
    autoDisplay: false,
    layout: google.translate.TranslateElement.InlineLayout.VERTICAL
  }, 'google_translate_element');

  // Links to cross-origin destinations are unsafe
  var gll = document.getElementsByClassName('goog-logo-link')[0];
  if (gll) {
    gll.setAttribute('rel', 'noopener');
  }

  function restoreLang() {
    var iframe = document.getElementsByClassName('goog-te-banner-frame')[0];
    if (!iframe) return;

    var innerDoc = iframe.contentDocument || iframe.contentWindow.document;
    var restore_el = innerDoc.getElementsByTagName("button");

    for (var i = 0; i < restore_el.length; i++) {
      if (restore_el[i].id.indexOf("restore") >= 0) {
        restore_el[i].click();
        var close_el = innerDoc.getElementsByClassName("goog-close-link");
        close_el[0].click();
        return;
      }
    }
  }

  function triggerHtmlEvent(element, eventName) {
    var event;
    if (document.createEvent) {
      event = document.createEvent('HTMLEvents');
      event.initEvent(eventName, true, true);
      element.dispatchEvent(event);
    } else {
      event = document.createEventObject();
      event.eventType = eventName;
      element.fireEvent('on' + event.eventType, event);
    }
  }

  var googleCombo = document.querySelector("select.goog-te-combo");
  var langSelect = document.querySelector('.ct-language');
  langSelect.addEventListener('click', function(event) {
    if (!event.target) {
      return;
    }

    var selected = document.querySelector('.ct-language .ct-language-selected');
    if (selected) {
      selected.classList.remove('ct-language-selected');
    }

    var target = event.target;
    while (target && target !== langSelect ) {
      if (target.matches('.lang-select')) {
        break;
      }
      target = target.parentElement;
    }

    if (target && target.matches('.lang-select')) {
      var lang = target.getAttribute('data-lang');
      if (googleCombo.value == lang) {
        restoreLang();
      } else {
        target.parentElement.classList.add('ct-language-selected');
        googleCombo.value = lang;
        triggerHtmlEvent(googleCombo, 'change');
      }
    }

    event.preventDefault();
  });
}
</script>

<script type="text/javascript" src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit" async></script>
</div></div>
        </nav></div>
  </div>
</header>

<script>
  function initHeader() {
    var lastScrollY = getScrollPos().y;
    var documentElement = document.documentElement;

    function storeScrollData() {
      var y = getScrollPos().y;documentElement.setAttribute("data-header-transparent", "");var scrollStatus = "";

      if (y <= 0) {
        scrollStatus = "top";
      } else if ((window.innerHeight + y) >= document.body.offsetHeight) {
        scrollStatus = "bottom";
      } else {
        var isScrollDown = (y - lastScrollY > 0) ? true : false;
        scrollStatus = isScrollDown ? "down" : "up";
      }

      lastScrollY = y;
      documentElement.setAttribute("data-scroll-status", scrollStatus);
    }

    window.addEventListener('scroll', function(e) {
      storeScrollData();
    });

    storeScrollData();
  }
  document.addEventListener('DOMContentLoaded', initHeader);
</script>


























































































































































<section class="page-banner">
    <div class="page-banner-img"><div style="background-image: url(/assets/images/banners/HA%20Banner.png)"></div>
        <img class="img-placeholder" src="/assets/images/banners/HA%20Banner.png"></div>
    <div class="wrapper">
      <div class="page-banner-inner"><header class="post-header">
  <h1 class="post-title p-name" itemprop="name headline">이젠 데탑도 서버에 넣어요.</h1>
  <h2 class="post-subtitle">Proxmox와 HA 연동하기</h2>

  <div class="post-meta">
    <time class="dt-published" datetime="2025-08-27T00:00:00+00:00" itemprop="datePublished"><i class="fa fa-calendar"></i> Aug 27, 2025
    </time><span class="post-author left-vsplit"><i class="fa fa-pencil"></i> Steven</span>
    
































    <span class="post-reading-time left-vsplit"><i class="fa fa-clock-o"></i> About 6 mins</span>
  </div><div class="post-tags"><a class="post-tag" href="/tags.html#Server">#Server</a><a class="post-tag" href="/tags.html#Proxmox">#Proxmox</a><a class="post-tag" href="/tags.html#Network">#Network</a><a class="post-tag" href="/tags.html#SFF">#SFF</a></div></header>
</div>
    </div>
  </section><script>
  function hashLocate(hashValue) {
    hashValue = hashValue.replace(/^.*#h-/, '');
    hashValue = decodeURIComponent(hashValue);
    var element = document.getElementById(hashValue);

    if (!element) {
      return;
    }

    var header = document.querySelector('header.site-header');
    var headerRect = header.getBoundingClientRect();
    var headerTop = Math.floor(headerRect.top);
    var headerHeight = Math.floor(headerRect.height);
    var scrollPos = getScrollPos();
    var offsetY = element.offsetTop - (headerTop + headerHeight + 20);

    if (offsetY == scrollPos.y) {
      return;
    }

    if (headerTop == 0  && offsetY > scrollPos.y) {
      offsetY += headerHeight + 2;
    } else if (headerTop < 0  && offsetY < scrollPos.y) {
      offsetY -= headerHeight - 2;
    }

    smoothScrollTo(offsetY);
  }

  // The first event occurred
  window.addEventListener('load', function(event) {
    if (window.location.hash) {
      hashLocate(window.location.hash);
    }
  });

  // The first event occurred
  window.addEventListener('click', function(event) {
    if (event.target.tagName.toLowerCase() == 'a') {
      hashLocate(event.target.getAttribute('href'));
    }
  });
</script>
<div class="theme-toggle">
  <input type="checkbox" id="theme-switch">
  <label for="theme-switch">
    <div class="toggle"></div>
    <div class="names">
      <p class="light">Light</p>
      <p class="dark">Dark</p>
    </div>
  </label>
</div>




<script>
  (function() {
    var sw = document.getElementById('theme-switch');
    var html = document.getElementsByTagName('html')[0];
    var nightModeOption = ('auto' || 'auto').toLowerCase();
    var storage = nightModeOption === 'manual'
        ? localStorage
        : sessionStorage;
    var themeData = loadThemeData();

    function saveThemeData(data) {
      storage.setItem('theme', JSON.stringify(data));
    }

    function loadThemeData() {
      var data = storage.getItem('theme');
      try {
        data = JSON.parse(data ? data : '');
      } catch(e) {
        data = { nightShift: undefined, autoToggleAt: 0 };
        saveThemeData(data);
      }
      return data;
    }

    function handleThemeToggle(nightShift) {
      themeData.nightShift = nightShift;
      saveThemeData(themeData);
      html.dataset.theme = nightShift ? 'dark' : 'light';
      setTimeout(function() {
        sw.checked = nightShift ? true : false;
        document.dispatchEvent(new Event('theme-changed'));
      }, 50);
    }

    function autoThemeToggle() {
      // Next time point of theme toggle
      var now = new Date();
      var toggleAt = new Date();
      var hours = now.getHours();
      var nightShift = hours >= 19 || hours <=7;

      if (nightShift) {
        if (hours > 7) {
          toggleAt.setDate(toggleAt.getDate() + 1);
        }
        toggleAt.setHours(7);
      } else {
        toggleAt.setHours(19);
      }

      toggleAt.setMinutes(0);
      toggleAt.setSeconds(0);
      toggleAt.setMilliseconds(0)

      var delay = toggleAt.getTime() - now.getTime();

      // auto toggle theme mode
      setTimeout(function() {
        handleThemeToggle(!nightShift);
      }, delay);

      return {
        nightShift: nightShift,
        toggleAt: toggleAt.getTime()
      };
    }

    // Listen the theme toggle event
    sw.addEventListener('change', function(event) {
      handleThemeToggle(event.target.checked);
    });

    if (nightModeOption == 'auto') {
      var data = autoThemeToggle();

      // Toggle theme by local setting
      if (data.toggleAt > themeData.autoToggleAt) {
        themeData.autoToggleAt = data.toggleAt;
        handleThemeToggle(data.nightShift);
      } else {
        handleThemeToggle(themeData.nightShift);
      }
    } else if (nightModeOption == 'manual') {
      handleThemeToggle(themeData.nightShift);
    } else {
      var nightShift = themeData.nightShift;
      if (nightShift === undefined) {
        nightShift = nightModeOption === 'on';
      }
      handleThemeToggle(nightShift);
    }
  })();
</script>
<div id="click-to-top" class="click-to-top">
  <i class="fa fa-arrow-up"></i>
</div>
<script>
  (function () {
    const clickToTop = document.getElementById('click-to-top');
    window.addEventListener('scroll', () => {
      if (window.scrollY > 100) {
        clickToTop.classList.add('show')
      }else {
        clickToTop.classList.remove('show')
      }
    });
    clickToTop.addEventListener('click', () => {
      window.smoothScrollTo(0);
    });
  })();
</script>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <div class="framework">
  <section class="main">

     <div class="post">
  <section>









<article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

    <div class="post-content e-content" itemprop="articleBody">

      <h2 id="서론">서론</h2>
<p>제목에서 말한 ‘데탑을 서버에 넣는다.’ 라는 문장은 사실<br />
Proxmox에 익숙한 사람이라면 아주 당연하게 받아들여질 문장이다.<br />
BIOS 설정에서 IOMMU 설정을 활성화한 다음에<br />
GPU Passthrough를 진행한 다음, 윈도우 VM에 할당하면 된다.<br /> 
이렇게 구성한 경우 GPU 단자에 디스플레이 케이블을 연결하기만 하면<br />
우리가 통상적으로 쓰는 데스크탑 마냥 사용할 수 있다.<br />
하지만 여기서 다룰 내용은 해당 내용이 아니니 <a href="https://nveloper.note/server/2023/08/10/FE5020-GPUpsth.html">다른 포스트</a>로 이동하길 바란다.<br /></p>

<p>나는 항상 서버라 하면 헤드리스로 구성하는 것을 지향한다.<br />
헤드리스는 간단하게 말하면 본체에 키보드, 모니터, 마우스<br />
(약칭으로 KVM이라 불리는 것들. 커널 기반 가상머신을 연상했다면 나랑 결혼하자.) <br />
없이 오직 랜선과 전원선만 꽂혀있는 구성이다.<br />
리눅스에 익숙한 사람들은 이런 구성이 얼마나 깔쌈한지 알고 있을 것이다.<br />
보통 그런 사람은 SSH로 주로 접근하고, 요즘엔 RDP를 이용해서 원격접속을 가능케해주는 xrdp 기능을 쓰기도 한다.<br />
나 역시 VGA가 지원될 환경이라면 Sunshine, Moonlight 조합으로 원격 접속을 하고,<br />
그런 환경이 아니라면 SSH, VNC, RDP 등을 활용한다.<br /></p>

<p>각설하고, 이런 식으로 자원을 효율적으로 쓰고(오버헤드,가 약간은 발생하지만) 미니멀한 구성을 꿈꾼다면<br />
한번쯤은 데스크탑 자체를 PVE 노드로 만들고 싶다는 상상을 해볼 것이다.<br />
보통은 안정성이라는 명목으로, 또 실용성이 떨어진다는 이유로 구성을 관둘 것이다.<br />
네이티브로 OS가 돌아가는 것이 VM보다 성능 상 낫다는 것은 부정할 수 없는 사실이고,<br />
VM으로 구성된 Windows OS의 전원을 켜려면 항상 PVE의 WebUI에서 조작을 해야 하기 때문에<br />
PVE에서 데스크탑의 용도로 VM을 돌린다는 발상이 여간 성가신 일이 아니다.<br />
하지만 PVE의 WebUI에서 조작을 해야한다는 성가심을 어느 정도 완화할 수 있는 방법이 존재하기는 한다!<br /></p>

<h2 id="proxmox-ve-addon">Proxmox VE Addon</h2>
<p>Home Assistant는 아주 많은 애드온을 지원한다.<br />
그 중 <a href="https://www.home-assistant.io/integrations/proxmoxve/">ProxmoxVE Addon</a>은 PVE 노드의 각종 정보를 Home Assistant에 불러오는 역할을 한다.<br />
불러와지는 정보는 노드의 대시보드와, 각 VM 또는 LXC의 대시보드, 그리고 저장장치의 상태 등이다.<br />
이걸로 우리는 PVE의 개략적인 상태를 관제할 수 있고, 각각의 VM, LXC에 대해 명령을 내릴 수 있다.<br />
이 명령들은 기본적으로는 비활성화되어 있으며, 활성화 후 reboot, start, shutdown 등을 사용할 수 있다.<br />
물론 이 명령들이 수행되기 위해서는 PVE의 WebUI에서도 수행되는 상태여야 하며, <br />
VM 측에 Qemu Guest Tool이 설치되어 있어야 한다.<br />
여기서 Qemu Guest Tool을 설치하는 방법은 생략하겠다.<br /></p>

<p>즉, 해당 명령들은 Home Assistant 측에서 Entity로 인식되며,<br />
우리는 이를 토대로 해당 Entity들을 자동화에 활용할 수 있다.<br />
Zigbee 프로토콜을 이용하는 리모컨 같은 것들을 이에 묶는다면,<br />
보다 더 직관적인 형태로 VM을 켜고 끄는 것이 가능해진다.<br />
우리가 데스크탑에서 하던 그대로의 느낌으로 말이다.<br />
폰이 더 친숙하고, 폰으로 모든 것을 하고 싶은 사람이라면<br />
Home Assistant 앱에서 해당 스위치에 접근하여 직접 켜고 끄는 방법이 있을 수도 있다.<br />
더 나아가 삼성 DeX 같은 것들이 가능한 갤럭시 기기라면,<br />
프로그래밍된 NFC 태그와 독 연결 인식으로 스위치를 트리거하고<br />
문라이트 같은 원격 앱으로 리다이렉트 하도록 구성할 수 있다. <br /></p>

<h2 id="적용하기">적용하기</h2>
<p>일단 ProxmoxVE 애드온을 구성하는 방법은 다음과 같다.<br /></p>
<ol>
  <li>configuration.yaml로 엔티티 구성</li>
  <li>HACS를 통하여 Proxmox VE 애드온 설치<br /></li>
</ol>

<p>Home Assistant를 구성한 사람들이라면 HACS를 어느 정도 활용해 보았을 것이니 편의상 후자를 추천하지만,<br /> 
경우에 따라 HACS를 활용하지 못하는 경우도 있을 수 있으므로 취사 선택해서 활용하기를 바란다.<br /></p>

<h3 id="1-configurationyaml로-엔티티-구성">1. configuration.yaml로 엔티티 구성<br /></h3>

<p>먼저 Home Assistant에 File Editor 애드온을 설치하여 접근하거나, SSH로 접근하거나 하여<br />
configuration.yaml을 열어야 한다.<br /></p>

<p>해당 파일을 열어서 아래의 내용을 붙여넣기 해준다. 한국어 부분은 설명대로 작성하여야 한다.<br /></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Home Assistant에서 configuration.yaml에 해당 내용 첨부
proxmoxve:
  - host: PVE의 IP 주소
    username: PVE에서의 아이디
    password: PVE에서의 비밀번호
    nodes:
      - node: 노드 이름
        vms:
          - VM의 ID
          - LXC의 ID
</code></pre></div></div>
<p>이렇게 하면 구성 내용에 오류가 있지 않는 한 정상적으로 애드온이 구성되고 관련 엔티티가 생겨야 한다.<br />
생기지 않았거나 노드가 제대로 적용되지 않았다면 Home Assistant 측의 로그를 확인하고 그에 맞는 조치를 취하여야 한다.<br /></p>

<h3 id="2-hacs를-통하여-proxmox-ve-애드온-설치">2. HACS를 통하여 Proxmox VE 애드온 설치<br /></h3>

<p>HACS를 통해 Proxmox VE를 설치하기 위해서는 Proxmox VE의 <a href="https://github.com/dougiteixeira/proxmoxve">Custom Integration</a>을 참고해야 한다.<br /></p>

<p>애드온 <a href="https://my.home-assistant.io/redirect/hacs_repository/?owner=dougiteixeira&amp;repository=proxmoxve&amp;category=integration">설치 링크</a>를 누르면 위 링크에서 제공하는 바로가기 링크로 가게 된다.</p>
<p align="center">
 <img src="/assets/images/FE5110-1.png" />
</p>
<p>본인의 Home Assistant 접속 주소를 Your Instance URL 항목에 적으면<br /> 
Home Assistant에 설치할 수 있도록 리다이렉트 될 것이다.<br /></p>

<p>만일 이 링크가 작동하지 않는다면 HACS custom repository에<br />
<code class="language-plaintext highlighter-rouge">https://github.com/dougiteixeira/proxmoxve</code>를 추가해줘야 한다.<br /></p>
<p align="center">
 <img src="/assets/images/FE5110-2.png" />
</p>
<p>위 사진처럼 HACS 탭에서 우측 3점 버튼을 누른 후, Custom Repositories를 누른다.<br />
그 곳에서 위 링크를 붙여넣고, Type은 Integration으로 지정한다.<br /></p>
<p align="center">
 <img src="/assets/images/FE5110-3.png" />
</p>
<p>그럼 위와 같이 Repository가 등록될 것이고,<br />
이를 통해 Proxmox VE 서버와 노드를 등록할 수 있다.<br /></p>

<p>이 방법을 통해 설치한 경우, 아래와 같은 화면이 나온다.<br /></p>
<p align="center">
 <img src="/assets/images/FE5110-4.png" />
</p>
<p><code class="language-plaintext highlighter-rouge">Host*</code> 부분에는 PVE의 IP 주소를 적어주면 되고,<br />
<code class="language-plaintext highlighter-rouge">Port</code> 는 PVE의 포트를 바꾸지 않은 이상 기본값 그대로 8006을 적어주면 된다.<br />
혹시 이 부분을 Nginx Proxy Manager로 대체한 URL로 채우면 오류가 뜰 것이다.<br />
아무래도 인증서 관련 문제인 듯 한데, 일단은 IP:포트 구성을 NPM 존재 여부와 상관없이<rb>
활용해야 할 듯 하다. 추후 해당 부분에 대해 알아내는 것이 있으면 추가 작성하겠다.<br />
<code class="language-plaintext highlighter-rouge">Username</code>은 PVE에서의 아이디를 입력하면 되고<br />
<code class="language-plaintext highlighter-rouge">Token name</code>은 PVE에서 발행한 토큰이 있다면 그 이름을 적어주면 된다.<br />
<code class="language-plaintext highlighter-rouge">Password</code>는 PVE에서의 비밀번호를 입력하면 되는데,<br />
<code class="language-plaintext highlighter-rouge">Token name</code>을 채웠다면 <code class="language-plaintext highlighter-rouge">Token value</code> 값을 채워줘도 무방하다.<br /> 
경험상 Token을 활용한 연결은 노드 값이 제대로 불러와지지 않는 등의 버그가 있었어서<br />
원래대로 <code class="language-plaintext highlighter-rouge">Username</code>과 <code class="language-plaintext highlighter-rouge">Password</code>를 입력하고 추가하는 것을 추천한다.<br /></rb></p>

<p>Submit를 누르면 노드와 VM, LXC 등 각종 Entity 들의 위치를 정하는 화면이 나오며<br />
Entity의 위치, 용도에 따라 자유롭게 정하면 되겠다.<br /></p>

<h2 id="설치-후-finishing-touch">설치 후 Finishing Touch</h2>
<p>이제 추가적으로 해줘야 할 것은 노드, VM, LXC에 대한<br /> 
제어 명령들을 보내는 Entity를 구성하는 것이다.<br /></p>
<p align="center">
 <img src="/assets/images/FE5110-5.png" />
</p>
<p>위 이미지는 VM에서 찍은 스크린샷이나, 노드, VM, LXC 모두<br /> 
같은 방법으로 Entity를 구성할 수 있다.<br /></p>

<p>여기서 Disabled Entities를 눌러 항목들을 보면,<br />
Start, Stop, Hibernate, Reboot, … 등의 비활성화된 버튼들이 보일 것이다.<br />
예시로 Reboot 버튼을 살려보도록 하겠다.<br /></p>
<p align="center">
 <img src="/assets/images/FE5110-6.png" />
</p>
<p>여기서 황색 Enable 버튼을 누르면 30초 이내로 활성화될 거라는 안내가 뜨고<br />
30초 이내로 해당 버튼이 Entity로 추가된다.<br />
다른 버튼들도 같은 방법으로 활성화하면<br /> 
VM을 Home Assistant에서 켜고 끌 수 있게 된다.<br /></p>

<h2 id="활용하기">활용하기</h2>
<p>이 자체만으로도 충분히 유용하게 활용 가능한 구성이 완성되었다.<br />
Home Assistant는 앱으로도 접근이 가능하고, 해당 앱 자체로도<br />
빅스비 루틴이나 Shortcut과 연동하여 활용할 수 있기 때문이다.<br /></p>

<p>그러나 여기서 좀 더 유용하게 활용하는 방법을 생각해보기로 했다.<br /></p>

<h3 id="출퇴근-트리거와-연동">출퇴근(?) 트리거와 연동</h3>

<h3 id="지그비-리모컨과-연동">지그비 리모컨과 연동</h3>

<p>###</p>


    </div>

</article>
<div class="post-nav"><a class="previous"
          href="/server/2025/06/08/013V-mmWave-1.html"
          title="재실센서, 그런데 ESP32인. (1)">
          <div>재실센서, 그런데 ESP32인. (1)</div>
        </a><a class="next"
          href="/server/2025/11/27/028V-tetheroversocks.html"
          title="아이폰 테더링 with Wireguard VPN">
          <div>아이폰 테더링 with Wireguard VPN</div>
        </a></div><div class="post-related">
      <div>Related Articles</div>
      <ul>
        <li class="">
          <a class="post-link"
            href="/server/2025/06/08/013V-mmWave-1.html"
            title="재실센서, 그런데 ESP32인. (1)">
            재실센서, 그런데 ESP32인. (1)<span class="post-badges">
  <span class="post-badge badge-top">TOP</span>
  <span class="post-badge badge-new">NEW</span>
</span>
</a>
        </li><li class="">
          <a class="post-link"
            href="/server/2025/11/27/028V-tetheroversocks.html"
            title="아이폰 테더링 with Wireguard VPN">
            아이폰 테더링 with Wireguard VPN<span class="post-badges">
  <span class="post-badge badge-top">TOP</span>
  <span class="post-badge badge-new">NEW</span>
</span>
</a>
        </li><li class="">
          <a class="post-link"
            href="/0001/01/01/000V-Initial-Post.html"
            title="First Page">
            First Page<span class="post-badges">
  <span class="post-badge badge-top">TOP</span>
  <span class="post-badge badge-new">NEW</span>
</span>
</a>
        </li><li class="">
          <a class="post-link"
            href="/server/2025/08/27/021V-PVE2HA.html"
            title="이젠 데탑도 서버에 넣어요.">
            이젠 데탑도 서버에 넣어요.<span class="post-badges">
  <span class="post-badge badge-top">TOP</span>
  <span class="post-badge badge-new">NEW</span>
</span>
</a>
        </li></ul>
    </div><div class="post-comments"></div></section>
</div>


  </section>
  <section class="sidebar" style="margin-left: 15px;">
    <!-- Get sidebar items --><style type="text/css" media="screen">
.post-menu ul {
  list-style: none;
  padding: 0;
  margin: 0;
}
</style>

<div class="post-menu">
  <div class="post-menu-title">TOC</div>
  <div class="post-menu-content"></div>
</div>

<script>
  function generateContent() {
    var menu = document.querySelector(".post-menu");
    var menuContent =  menu.querySelector(".post-menu-content");
    var headings = document.querySelector(".post-content").querySelectorAll("h2, h3, h4, h5, h6");

    // Hide menu when no headings
    if (headings.length === 0) {
      return menu.style.display = "none";
    }

    // Generate post menu
    var menuHTML = '';
    for (var i = 0; i < headings.length; i++) {
      var h = headings[i];
      menuHTML += (
        '<li class="h-' + h.tagName.toLowerCase() + '">'
        + '<a href="#h-' + h.getAttribute('id') + '">' + h.textContent + '</a></li>');
    }

    menuContent.innerHTML = '<ul>' + menuHTML + '</ul>';

    // The header element
    var header = document.querySelector('header.site-header');

    function doMenuCollapse(index, over_items) {
      var items = menuContent.firstChild.children;

      if (over_items == undefined) {
        over_items = 20;
      }

      if (items.length < over_items) {
        return;
      }

      var activeItem = items[index];
      var beginItem = activeItem
      var endItem = activeItem
      var beginIndex = index;
      var endIndex = index + 1;
      while (beginIndex >= 0
        && !items[beginIndex].classList.contains('h-h2')) {
        beginIndex -= 1;
      }
      while (endIndex < items.length
        && !items[endIndex].classList.contains('h-h2')) {
        endIndex += 1;
      }
      for (var i = 0; i < beginIndex; i++) {
        item = items[i]
        if (!item.classList.contains('h-h2')) {
          item.style.display = 'none';
        }
      }
      for (var i = beginIndex + 1; i < endIndex; i++) {
        item = items[i]
        // if (!item.classList.contains('h-h2')) {
          item.style.display = '';
        // }
      }
      for (var i = endIndex; i < items.length; i++) {
        item = items[i]
        if (!item.classList.contains('h-h2')) {
          item.style.display = 'none';
        }
      }
    }

    // Init menu collapsed
    doMenuCollapse(-1);

    // Active the menu item
    window.addEventListener('scroll', function (event) {
      var lastActive = menuContent.querySelector('.active');
      var changed = true;
      var activeIndex = -1;
      for (var i = headings.length - 1; i >= 0; i--) {
        var h = headings[i];
        var headingRect = h.getBoundingClientRect();
        var headerRect = header.getBoundingClientRect();
        var headerTop = Math.floor(headerRect.top);
        var headerHeight = Math.floor(headerRect.height);
        var headerHeight = headerTop + headerHeight + 20;
        if (headingRect.top <= headerHeight) {
          var id = 'h-' + h.getAttribute('id');
          var a = menuContent.querySelector('a[href="#' + id  + '"]');
          var curActive = a.parentNode;
          if (curActive) {
            curActive.classList.add('active');
            activeIndex = i;
          }
          if (lastActive == curActive) {
            changed = false;
          }
          break;
        }
      }
      if (changed) {
        if (lastActive) {
          lastActive.classList.remove('active');
        }
        doMenuCollapse(activeIndex);
      }
      event.preventDefault();
    });
  }
  generateContent();
</script>
</section>
</div>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">
    <div class="site-footer-inner"><div></div>
      <div>Powered by <a title="Jekyll is a simple, blog-aware, static site
      generator." href="https://jekyllrb.com/">Jekyll</a> &amp; <a title="Yat, yet
      another theme." href="https://github.com/jeffreytse/jekyll-theme-yat">Yat Theme</a>.</div>
      <div class="footer-col rss-subscribe">Subscribe <a href="/feed.xml">via RSS</a></div>
    </div>
  </div>
</footer>
</body>
</html>
